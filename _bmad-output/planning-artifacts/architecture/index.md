# Architecture Decision Document

## Table of Contents

- [Architecture Decision Document](#table-of-contents)
  - [stepsCompleted: [1, 2, 3, 4, 5, 6, 7, 8]
inputDocuments: ['product-brief-secondbrain-2026-01-11.md', 'prd.md', 'prd-validation-report.md', 'ux-design-specification.md']
workflowType: 'architecture'
project_name: 'secondbrain'
user_name: 'Matthieu'
date: '2026-01-11'
lastStep: 8
status: 'complete'
completedAt: '2026-01-12'](#stepscompleted-1-2-3-4-5-6-7-8-inputdocuments-product-brief-secondbrain-2026-01-11md-prdmd-prd-validation-reportmd-ux-design-specificationmd-workflowtype-architecture-projectname-secondbrain-username-matthieu-date-2026-01-11-laststep-8-status-complete-completedat-2026-01-12)
  - [Project Context Analysis](./project-context-analysis.md)
    - [Requirements Overview](./project-context-analysis.md#requirements-overview)
    - [Scale & Complexity](./project-context-analysis.md#scale-complexity)
    - [Technical Constraints & Dependencies](./project-context-analysis.md#technical-constraints-dependencies)
    - [Cross-Cutting Concerns Identified](./project-context-analysis.md#cross-cutting-concerns-identified)
  - [Starter Template Evaluation](./starter-template-evaluation.md)
    - [Primary Technology Domain](./starter-template-evaluation.md#primary-technology-domain)
    - [Starter Options Considered](./starter-template-evaluation.md#starter-options-considered)
    - [Selected Starter: create-next-app (Official) + Manual Configuration](./starter-template-evaluation.md#selected-starter-create-next-app-official-manual-configuration)
    - [Initialization Command](./starter-template-evaluation.md#initialization-command)
    - [Architectural Decisions Provided by Starter](./starter-template-evaluation.md#architectural-decisions-provided-by-starter)
  - [Core Architectural Decisions](./core-architectural-decisions.md)
    - [Decision Summary](./core-architectural-decisions.md#decision-summary)
    - [Data Architecture](./core-architectural-decisions.md#data-architecture)
      - [Database: Supabase PostgreSQL](./core-architectural-decisions.md#database-supabase-postgresql)
      - [ORM: Prisma](./core-architectural-decisions.md#orm-prisma)
      - [Database Schema](./core-architectural-decisions.md#database-schema)
      - [Redis: Bull Queue for Async Jobs](./core-architectural-decisions.md#redis-bull-queue-for-async-jobs)
    - [Authentication & Security](./core-architectural-decisions.md#authentication-security)
      - [Authentication: Supabase Auth](./core-architectural-decisions.md#authentication-supabase-auth)
      - [API Security](./core-architectural-decisions.md#api-security)
    - [API & Communication Patterns](./core-architectural-decisions.md#api-communication-patterns)
      - [API Design: Next.js API Routes (REST)](./core-architectural-decisions.md#api-design-nextjs-api-routes-rest)
    - [Frontend Architecture](./core-architectural-decisions.md#frontend-architecture)
      - [State Management: React Server Components + Zustand](./core-architectural-decisions.md#state-management-react-server-components-zustand)
      - [Markdown Editor: CodeMirror 6](./core-architectural-decisions.md#markdown-editor-codemirror-6)
    - [Infrastructure & Deployment](./core-architectural-decisions.md#infrastructure-deployment)
      - [Deployment Strategy](./core-architectural-decisions.md#deployment-strategy)
      - [CI/CD: GitHub Actions](./core-architectural-decisions.md#cicd-github-actions)
      - [Logging: Pino](./core-architectural-decisions.md#logging-pino)
    - [Decision Impact Analysis](./core-architectural-decisions.md#decision-impact-analysis)
      - [Implementation Sequence](./core-architectural-decisions.md#implementation-sequence)
      - [Cross-Component Dependencies](./core-architectural-decisions.md#cross-component-dependencies)
    - [Migration Paths & Contingencies](./core-architectural-decisions.md#migration-paths-contingencies)
      - [Supabase Free Tier Exhaustion](./core-architectural-decisions.md#supabase-free-tier-exhaustion)
      - [Redis Upstash Free Tier Exhaustion](./core-architectural-decisions.md#redis-upstash-free-tier-exhaustion)
  - [Architecture Validation](./architecture-validation.md)
    - [Requirements Traceability](./architecture-validation.md#requirements-traceability)
    - [Performance Budget Validation](./architecture-validation.md#performance-budget-validation)
  - [Implementation Patterns & Consistency Rules](./implementation-patterns-consistency-rules.md)
    - [Pattern Categories Defined](./implementation-patterns-consistency-rules.md#pattern-categories-defined)
    - [Naming Patterns](./implementation-patterns-consistency-rules.md#naming-patterns)
      - [Database Naming (Prisma)](./implementation-patterns-consistency-rules.md#database-naming-prisma)
      - [API Naming (Next.js Routes)](./implementation-patterns-consistency-rules.md#api-naming-nextjs-routes)
      - [Code Naming (TypeScript)](./implementation-patterns-consistency-rules.md#code-naming-typescript)
    - [Structure Patterns](./implementation-patterns-consistency-rules.md#structure-patterns)
      - [Project Organization (Next.js 15 App Router)](./implementation-patterns-consistency-rules.md#project-organization-nextjs-15-app-router)
    - [Format Patterns](./implementation-patterns-consistency-rules.md#format-patterns)
      - [API Response Format (Standardized)](./implementation-patterns-consistency-rules.md#api-response-format-standardized)
      - [Date/Time Formats](./implementation-patterns-consistency-rules.md#datetime-formats)
      - [JSON Field Naming](./implementation-patterns-consistency-rules.md#json-field-naming)
      - [Status Code Usage (HTTP)](./implementation-patterns-consistency-rules.md#status-code-usage-http)
    - [Communication Patterns](./implementation-patterns-consistency-rules.md#communication-patterns)
      - [Event System (Bull Queue)](./implementation-patterns-consistency-rules.md#event-system-bull-queue)
      - [State Management (Zustand)](./implementation-patterns-consistency-rules.md#state-management-zustand)
      - [Logging Format (Pino)](./implementation-patterns-consistency-rules.md#logging-format-pino)
    - [Process Patterns](./implementation-patterns-consistency-rules.md#process-patterns)
      - [Error Handling (Centralized)](./implementation-patterns-consistency-rules.md#error-handling-centralized)
      - [Loading State Handling](./implementation-patterns-consistency-rules.md#loading-state-handling)
      - [Retry Logic (Bull Queue)](./implementation-patterns-consistency-rules.md#retry-logic-bull-queue)
    - [Enforcement Guidelines](./implementation-patterns-consistency-rules.md#enforcement-guidelines)
    - [Pattern Verification](./implementation-patterns-consistency-rules.md#pattern-verification)
    - [Pattern Examples](./implementation-patterns-consistency-rules.md#pattern-examples)
      - [✅ Good Example (Note Creation API)](./implementation-patterns-consistency-rules.md#good-example-note-creation-api)
      - [❌ Anti-Patterns (À ÉVITER)](./implementation-patterns-consistency-rules.md#anti-patterns-viter)
    - [Pattern Compliance Checklist](./implementation-patterns-consistency-rules.md#pattern-compliance-checklist)
  - [Project Structure & Boundaries](./project-structure-boundaries.md)
    - [Complete Project Directory Structure](./project-structure-boundaries.md#complete-project-directory-structure)
    - [Architectural Boundaries](./project-structure-boundaries.md#architectural-boundaries)
      - [API Boundaries](./project-structure-boundaries.md#api-boundaries)
      - [Component Boundaries](./project-structure-boundaries.md#component-boundaries)
      - [Service Boundaries](./project-structure-boundaries.md#service-boundaries)
      - [Data Boundaries](./project-structure-boundaries.md#data-boundaries)
    - [Requirements to Structure Mapping](./project-structure-boundaries.md#requirements-to-structure-mapping)
    - [Integration Points](./project-structure-boundaries.md#integration-points)
      - [Internal Communication](./project-structure-boundaries.md#internal-communication)
      - [External Integrations](./project-structure-boundaries.md#external-integrations)
      - [Data Flow](./project-structure-boundaries.md#data-flow)
    - [File Organization Patterns](./project-structure-boundaries.md#file-organization-patterns)
      - [Configuration Files](./project-structure-boundaries.md#configuration-files)
      - [Source Organization](./project-structure-boundaries.md#source-organization)
      - [Test Organization](./project-structure-boundaries.md#test-organization)
      - [Asset Organization](./project-structure-boundaries.md#asset-organization)
    - [Development Workflow Integration](./project-structure-boundaries.md#development-workflow-integration)
      - [Development Server Structure](./project-structure-boundaries.md#development-server-structure)
      - [Build Process Structure](./project-structure-boundaries.md#build-process-structure)
      - [Deployment Structure](./project-structure-boundaries.md#deployment-structure)
  - [Architecture Validation Results](./architecture-validation-results.md)
    - [Coherence Validation ✅](./architecture-validation-results.md#coherence-validation)
    - [Requirements Coverage Validation ✅](./architecture-validation-results.md#requirements-coverage-validation)
    - [Implementation Readiness Validation ✅](./architecture-validation-results.md#implementation-readiness-validation)
    - [Gap Analysis Results](./architecture-validation-results.md#gap-analysis-results)
    - [Validation Issues Addressed](./architecture-validation-results.md#validation-issues-addressed)
    - [Architecture Completeness Checklist](./architecture-validation-results.md#architecture-completeness-checklist)
    - [Architecture Readiness Assessment](./architecture-validation-results.md#architecture-readiness-assessment)
    - [Implementation Handoff](./architecture-validation-results.md#implementation-handoff)
  - [Architecture Completion Summary](./architecture-completion-summary.md)
    - [Workflow Completion](./architecture-completion-summary.md#workflow-completion)
    - [Final Architecture Deliverables](./architecture-completion-summary.md#final-architecture-deliverables)
    - [Implementation Handoff](./architecture-completion-summary.md#implementation-handoff)
    - [Quality Assurance Checklist](./architecture-completion-summary.md#quality-assurance-checklist)
    - [Project Success Factors](./architecture-completion-summary.md#project-success-factors)
